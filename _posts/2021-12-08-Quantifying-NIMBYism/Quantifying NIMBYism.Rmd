---
title: "Quantifying NIMBYism"
author:
  - name: Jacob Ford
    url: https://jford-dchcmpo.github.io/Blog/
date: 01-06-2021
output:
  distill::distill_article:
    self_contained: false
---


![](sign.png) 

## Vapid & Plastic

Take a stroll down any street in Durham, which many on this blog have called the Mecca of the South, and you'll quickly notice the tell-tale sign that you're in a quickly gentrifying area. The signs. 

Black lives matter. Science is Real. Housing is a Human Right. Stop the Steal. 

No, I'm kidding about the last one, at least those aren't prevalent in my neighborhoods. 

These signs are mainly virtue signaling in my opinion. But I'm not here to argue about lawn signs. I do believe that in the broad, middle to upper-middle class Democratic base there is a pervasive hypocrasy when it comes to political priorities they support and the actions that defend and hoard opportunities for others. I was lucky to take a seminar from Richard Reeves of the Brooking Institute on the very subject, and he's written prodigiously regarding this very confluence of virtue signaling and virtue setting. These double-standards are nearly as ubiquitious as the aforementioned lawn signs: university legacy admissions, fiscal policy such as the mortgage interest deduction, 529 plans, estate and sales tax and most recently the absurd SALT deduction - which Reeves argues should be completely eliminated, and house zoning. Democrats are typically focused on demand-centric solutions: example, college is too expensive so increase aid or medical bills are shockingly high, so provide more targetted aid, without addressing more substantial sources of supply inefficiencies or potential expansion for new markets. Zoning is a perfectly apt example, so I wanted to dive into Durham's zoning ordinances. 

I found myself wondering, are Durham zoning laws reflective of a majority Democratic enclave, a quickly growing liberal bubble? 


Are Durham's zoning ordinances aligned with beliefs of all those stupid lawn signs? 

Note: Durham's [Comprehensive Plan](https://engagedurham.com/comprehensive-plan/) is being updated, so zoning ordinances for a county experiencing population explosions is likely to occur. 



```{r setup, include=FALSE}
knitr::opts_chunk$set(warning = FALSE, message = FALSE)
library(caliperR)
library(nngeo)
library(tcadr)
library(sf)
library(leaflet)
library(PL94171)
library(janitor)
library(dplyr)
library(tidycensus)
library(tidyverse)
options(tigris_use_cache = TRUE)
library(sf)
library(data.table)
library(dplyr)
library(plotly)


# remotes::install_github("walkerke/tidycensus")
# remotes::install_github("walkerke/tigris")
library(tidycensus)
library(tidyverse)
library(tigris)

vars_2020 <- load_variables(2020,"pl",cache=TRUE)
vars_2010 <- load_variables(2010,"sf1", cache=TRUE)
vars_2019 <- load_variables(2019,"acs5", cache=TRUE)




zones <- st_read("C:/Users/JacobFo/OneDrive - City of Durham/GitHub/Personal Blog/Personal Blog/_posts/2021-12-08-Quantifying-NIMBYism/Zoning.shp")







```
 
 
 
## EDA 

I've worked in local and state governments for most of my career. Accessing data can get a little complicated or wildly bureaucratic, so we'll make a few assumptions along the way. The question we're trying to answer is to what degree is Durham's zoning amenable to non-single family homes? Most of the new houses getting torn down in my neighborhood are being replaced by gorgeous three story brand-spanking new single family homes. Using 2020 census data, we can determine the percentage of Durham-ites zoned for single or multiple family homes. 

Let me preface also preface this with I am a hard-core YIMBY-er, if you couldn't tell from the previous section...

Durham's zoning data is publicly available, and is classified in an understandably long-winded manner. Below are the initial zone types: 

```{r echo=FALSE, message=FALSE, warning=FALSE}
table(zones$ZONE_GEN)
```


As the songbird of our generation Carly Rae Jepson once said, let's cut to the feeling. 

Collapse each zone into residential, commerical/university, and other - comprising municipal buildings, fire stations, schools, etc. A challenge is determining what exactly "Residential High Density" means compared to "Low Density". The below table from the previous [Durham Comprehensive Plan](https://durhamnc.gov/DocumentCenter/View/9020/2-Land-Use) shows the below table, which we will use to approximate dwell units permitted on each type of zone. Downtown zones in the 'High' Density have a hilarious "unlimited" density limit, so I'm expecting a new Burj Khalifa sooner rather than later with that type of free reign. 




![](durham zoning table.PNG)

After collapsing, we get the following reduced zones below. The interactive map shows these three broad categories for the whole county. For those of you not familiar with the Mecca of the South, that pinkish red section is Duke University and Duke Hospital. 

Most of the county is zoned residential, which makes sense. Commerical zones mainly follow along the major highway corridor NC 147 and I-40, along with smatterings here and there. But what this map does not show is what type of residential zones these represent.  



```{r echo=FALSE, message=FALSE, warning=FALSE}
res_words <- paste("RESIDENTIAL", "RES", sep = "|")

commerical_words <- paste("COMMECIAL", "COMMERCIAL", "UNIVERSITY","OFFICE", "INDUST", "MIXED", 'COMPACT',sep = "|")

downtown_words <- paste("DOWNTOWN")

  
zones <- zones %>%
  mutate(
    zone_flag = case_when(
      grepl("COMPACT", ZONE_GEN) ~ "Compact",
      is.na(ZONE_GEN) ~ "University",
      grepl(downtown_words, ZONE_GEN) ~ "Downtown",
      grepl(commerical_words, ZONE_GEN) ~ "Commerical",
      grepl(res_words, ZONE_GEN) ~ "Residential",
      
      TRUE ~ "Other"
      )
    )


table(zones$zone_flag)
```


```{r echo=FALSE, message=FALSE, warning=FALSE}




pal <- colorFactor(
  palette='Dark2',
  domain=zones$zone_flag
)

zone_map <- leaflet() %>%
  addProviderTiles("CartoDB.Positron") %>%
  setView(-78.90390102117877,35.998220055791876,  zoom=14)%>%
  addPolygons(data=zones,
              weight=1,
              color=~pal(zone_flag),
              popup=paste("Zone Type: ", zones$zone_flag, "<br>",
                          "Detailed Zone:", zones$ZONE_GEN)) %>%
  addLegend(
    position="bottomright",
    pal=pal,
    values=zones$zone_flag
  )


zone_map
```

## Get your snorkles, we're diving in. 




The Mecca of the South categorizes zoning by the following table, available in the [Durham Comprehensive Plan](https://durhamnc.gov/DocumentCenter/View/9020/2-Land-Use): 

```{r echo=FALSE, message=FALSE, warning=FALSE}

res_zones <- zones %>%
  filter(zone_flag == "Residential" | zone_flag=="Compact") %>%
  filter(ZONE_GEN != "RESEARCH") %>%
  mutate(
    density = case_when(
     grepl("RURAL", ZONE_GEN)  ~ "Rural Density",
     ZONE_GEN == "RES_LOW_DENSITY" ~ "Low Density",
     ZONE_GEN == "RES_MEDIUM_DENSITY" ~ "Medium Density",
     ZONE_GEN == "RES_HIGH_DENSITY" ~ "High Density",
     grepl("COMPACT", ZONE_GEN) ~ "Compact"
      ),
    dwell_units = case_when (
      density == "Rural Density" ~ ACRES * 0.75,
      density == "Low Density" ~ ACRES * 4,
      density == "Medium Density" ~ ACRES * 9,
      density == "High Density" ~ ACRES * 36,
      density == "Compact" ~ ACRES * 75
    )
    )



bins<-c(0,50,100,250,500,1000,2000,5000, 10000, 50000)
library(RColorBrewer)

pal <- colorBin(
  palette='RdYlGn',
  bins=bins,
  domain=res_zones$dwell_units
)

zone_map <- leaflet() %>%
  addProviderTiles("CartoDB.Positron") %>%
  setView(-78.90390102117877,35.998220055791876,  zoom=14)%>%
  addPolygons(data=res_zones,
              weight=1,
              color=~pal(dwell_units),
              popup=paste("Zone Type: ", res_zones$zone_flag, "<br>",
                          "Detailed Zone:", res_zones$ZONE_GEN, "<br>",
                          "Zoned for ", res_zones$dwell_units, "Dwell Units maximum", "<br>",
                          "Acres: ", res_zones$ACRES)) %>%
  addLegend(
    position="bottomright",
    pal=pal,
    values=res_zones$dwell_units
  )


zone_map



pal <- colorFactor(
  palette='Dark2',
  domain=zones$density
)

zone_map <- leaflet() %>%
  addProviderTiles("CartoDB.Positron") %>%
  setView(-78.90390102117877,35.998220055791876,  zoom=14)%>%
  addPolygons(data=res_zones,
              weight=1,
              color=~pal(density),
              popup=paste("Zone Type: ", res_zones$zone_flag, "<br>",
                          "Detailed Zone:", res_zones$ZONE_GEN)) %>%
  addLegend(
    position="bottomright",
    pal=pal,
    values=res_zones$density
  )


zone_map



```





### Heaping Cup of Demographic Data

I wonder how many people and households reside in the variety of zones, and how has that changed? Are zones meeting the explosion of demand in Durham? 

Idea is to tag each zone with the actual number of HH's to get a ratio 


1. underutilization rate - zoning vs occupied:
2. NIMBY score: percentage of population living in low density homes (low, med, high)

```{r}

library(tidycensus)
library(tidyverse)
library(tigris)

vars_2020 <- load_variables(2020,"pl",cache=TRUE)
vars_2010 <- load_variables(2010,"sf1", cache=TRUE)
vars_2019 <- load_variables(2019,"acs5", cache=TRUE)


##Get 2020 Census Data

HH_2020_bg <- get_decennial(
 geography="block",
 variables= c(HH="H1_001N",
              Pop="P1_001N"), ## note represents all HH's - occupied + vacant
 state="NC",
 year=2020,
 geometry=TRUE,
 county="Durham"
)  %>%
  mutate(new_Name = sub(" County, Nsorth Carolina", "", NAME),
        Year=2020) %>%
  group_by(GEOID) %>%
  summarise(HH=value[variable=="HH"],
            Pop=value[variable=="Pop"])

##Get 2010 Census Data

HH_2010_bg <- get_decennial(
 geography="block",
 variables= c(HH="H001001", 
              Pop="P001001"), ## note represents all HH's - occupied + vacant
 state="NC",
 year=2010,
 geometry=TRUE,
 county="Durham"
)  %>%
  mutate(new_Name = sub(" County, Nsorth Carolina", "", NAME),
        Year=2010) %>%
  summarise(HH=value[variable=="HH"],
            Pop=value[variable=="Pop"])




temp <- HH_2020_bg %>%
  st_point_on_surface() %>%
  st_join(res_zones %>% select(density)) %>%
  st_drop_geometry() %>%
  filter(!is.na(density)) %>%
  group_by(density) %>%
  summarise(HH=sum(HH),
            Pop=sum(Pop))




```


```{r}
temp <- HH_2020_bg %>%
  group_by(GEOID) %>%
  summarise(HH=value[variable=="HH"],
            Pop=value[variable=="Pop"])
```































## References

1. https://medium.com/@NYUurbanlab/actually-nimbys-cities-arent-building-enough-51806be038ae
2. https://abundanthousingla.org/meet-l-a-countys-biggest-nimbys/
3. https://live-durhamnc.opendata.arcgis.com/datasets/zoning/explore?location=36.012451%2C-78.920767%2C15.62

4. https://maps.durhamnc.gov/?x=36.01483037908998&y=-78.92072715568013&z=18055.9548215&r=0&b=11&pid=NA&s=zoning&l=active_address_points,countymask,transitionalofficeoverlay,NPO,NHD,LocHistLandmarks,airportoverlay,citylimits,RTPboundary,parcels,zoning,



